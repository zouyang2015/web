{"version":3,"sources":["webpack:///src/components/code/index.vue","webpack:///./src/components/code/index.vue?ee65","webpack:///./src/components/code/index.vue"],"names":["code","_this","this","callback","required","trigger","validator","validateCode","_this2","sendCode","_this3","_this4","count","timer","Advert","advert","Language","language","copyRight","copyright","components_code","render","_vm","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","autoComplete","model","codeForm","rules","codeRules","label-position","class","noLabel","verificationCode","onFocus","codeType","label","$t","prop","name","type","placeholder","on","focus","$event","blur","value","$$v","$set","expression","click","directives","rawName","countShow","_s","promoCode","pwdType","nativeOn","keyup","_k","keyCode","key","handleLogin","staticStyle","width","loading","disabled","isCode","preventDefault","handleFinish","goLogin","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"yJAqDAA,mBAEA,uBACA,IAAAC,EAAAC,qDAGA,cACA,wBAEA,EACAC,wCAKA,aAGA,+BAEA,aAEA,kCAEAC,UAAA,EAAAC,QAAA,OAAAC,UACAC,IAAAH,UAAA,EAAAC,QAAA,SAAAC,UAGAC,cACA,UAEA,kBACA,eAEA,eACA,QACA,cACA,QAEA,+CAIA,IAAAC,EAAAN,6BAGAO,YACA,wEAKA,gBAEA,oCAGA,IAAAC,EAAAR,uEAiBA,mBACA,aAfA,uBAYA,kCAQA,IAAAS,EAAAT,6BAlFA,mBAqFA,oBAIA,wDAzFA,KA4FAU,sBAEA,kBACAC,eACA,OAEA,0CAKA,gDAIAA,kBACA,kBAGAC,OAAAC,EAAA,EACAC,SAAAC,EAAA,EAEAC,UAAAC,EAAA,KClKAC,GADiBC,OAFjB,WAA0B,IAAAC,EAAApB,KAAaqB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,oBAA8BF,EAAA,UAAAH,EAAAM,GAAA,KAAAH,EAAA,OAAqCE,YAAA,mBAA6BF,EAAA,YAAAH,EAAAM,GAAA,KAAAH,EAAA,OAAuCE,YAAA,eAAyBF,EAAA,WAAgBI,IAAA,WAAAF,YAAA,YAAAG,OAA8CC,aAAA,KAAAC,MAAAV,EAAAW,SAAAC,MAAAZ,EAAAa,UAAAC,iBAAA,UAAwFX,EAAA,gBAAqBE,YAAA,mBAAAU,OAAsCC,SAAAhB,EAAAW,SAAAM,iBAAAC,QAAA,IAAAlB,EAAAmB,SAAAF,kBAAyFT,OAAQY,MAAApB,EAAAqB,GAAA,yBAAAC,KAAA,sBAAmEnB,EAAA,YAAiBK,OAAOe,KAAA,mBAAAC,KAAA,OAAAC,YAAAzB,EAAAqB,GAAA,0BAAsFK,IAAKC,MAAA,SAAAC,GAAyB5B,EAAAmB,SAAAF,iBAAA,GAAkCY,KAAA,SAAAD,GAAyB5B,EAAAmB,SAAAF,iBAAA,IAAmCP,OAAQoB,MAAA9B,EAAAW,SAAA,iBAAA9B,SAAA,SAAAkD,GAA+D/B,EAAAgC,KAAAhC,EAAAW,SAAA,mBAAAoB,IAAgDE,WAAA,+BAAyCjC,EAAAM,GAAA,KAAAH,EAAA,aAA8BK,OAAOgB,KAAA,WAAiBE,IAAKQ,MAAAlC,EAAAb,YAAsBgB,EAAA,QAAagC,aAAaZ,KAAA,OAAAa,QAAA,SAAAN,OAAA9B,EAAAqC,UAAAJ,WAAA,iBAA8EjC,EAAA,aAAAA,EAAAM,GAAAN,EAAAsC,GAAAtC,EAAAqB,GAAA,qBAAArB,EAAAM,GAAAN,EAAAsC,GAAAtC,EAAAqB,GAAA,0BAAArB,EAAAM,GAAA,KAAAH,EAAA,QAAqIgC,aAAaZ,KAAA,OAAAa,QAAA,SAAAN,MAAA9B,EAAA,UAAAiC,WAAA,gBAA4EjC,EAAAM,GAAAN,EAAAsC,GAAAtC,EAAAV,OAAA,cAAAU,EAAAM,GAAA,KAAAH,EAAA,gBAAwEY,OAAOC,SAAAhB,EAAAW,SAAA4B,UAAArB,QAAA,IAAAlB,EAAAmB,SAAAoB,WAA2E/B,OAAQY,MAAApB,EAAAqB,GAAA,kBAAAC,KAAA,eAAqDnB,EAAA,YAAiBK,OAAOe,KAAA,OAAAC,KAAAxB,EAAAwC,QAAAf,YAAAzB,EAAAqB,GAAA,mBAAwEK,IAAKC,MAAA,SAAAC,GAAyB5B,EAAAmB,SAAAoB,UAAA,GAA2BV,KAAA,SAAAD,GAAyB5B,EAAAmB,SAAAoB,UAAA,IAA4BE,UAAWC,MAAA,SAAAd,GAAyB,iBAAAA,IAAA5B,EAAA2C,GAAAf,EAAAgB,QAAA,WAAAhB,EAAAiB,IAAA,SAA+F7C,EAAA8C,YAAAlB,GAAf,OAA+ClB,OAAQoB,MAAA9B,EAAAW,SAAA,UAAA9B,SAAA,SAAAkD,GAAwD/B,EAAAgC,KAAAhC,EAAAW,SAAA,YAAAoB,IAAyCE,WAAA,yBAAkC,GAAAjC,EAAAM,GAAA,KAAAH,EAAA,OAA4BE,YAAA,SAAmBL,EAAAM,GAAAN,EAAAsC,GAAAtC,EAAAqB,GAAA,0BAAArB,EAAAM,GAAA,KAAAH,EAAA,gBAAAA,EAAA,aAAgG4C,aAAaC,MAAA,QAAexC,OAAQgB,KAAA,UAAAyB,QAAAjD,EAAAiD,QAAAC,UAAAlD,EAAAmD,QAA8DV,UAAWP,MAAA,SAAAN,GAAiD,OAAxBA,EAAAwB,iBAAwBpD,EAAAqD,aAAAzB,OAAkC5B,EAAAM,GAAA,iBAAAN,EAAAsC,GAAAtC,EAAAqB,GAAA,8CAAArB,EAAAM,GAAA,KAAAH,EAAA,MAAAA,EAAA,MAAAH,EAAAM,GAAA,KAAAH,EAAA,MAAAH,EAAAM,GAAA,eAAAN,EAAAsC,GAAAtC,EAAAqB,GAAA,uBAAAlB,EAAA,aAAoNK,OAAOgB,KAAA,QAAcE,IAAKQ,MAAAlC,EAAAsD,WAAqBtD,EAAAM,GAAAN,EAAAsC,GAAAtC,EAAAqB,GAAA,8BAAArB,EAAAM,GAAA,KAAAH,EAAA,uBAEprFoD,oBCEjB,IAcAC,EAdAC,EAAA,OAcAC,CACAhF,EACAoB,GATA,EAXA,SAAA6D,GACAF,EAAA,QACAA,EAAA,SAaA,kBAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/6.dd538781c181304494d2.js","sourcesContent":["<template>\n  <div class=\"baima-container\">\n    <advert></advert>\n    <div class=\"code-container\">\n      <language></language>\n      <div class=\"code-inner\">\n        <el-form class=\"code-form\" autoComplete=\"on\" :model=\"codeForm\" :rules=\"codeRules\" ref=\"codeForm\"\n                 label-position=\"left\">\n          </el-form-item>\n          <el-form-item :label=\"$t('code.VerificationCode')\" class=\"verificationCode\" prop=\"verificationCode\" :class=\"{'noLabel': !codeForm.verificationCode, 'onFocus':codeType.verificationCode === 1}\">\n            <el-input name=\"verificationCode\" type=\"text\" v-model=\"codeForm.verificationCode\"\n                      :placeholder=\"$t('code.VerificationCode')\" @focus=\"codeType.verificationCode = 1\" @blur=\"codeType.verificationCode = 0\"/>\n            <el-button type=\"primary\" @click=\"sendCode\">\n              <span v-show=\"!countShow\">\n                <template v-if=\"isFirstSend\">{{$t('code.sendCode')}}</template>\n                <template v-else>{{$t('code.sendCodeRe')}}</template>\n              </span>\n              <span v-show=\"countShow\">{{count}} 秒</span>\n            </el-button>\n          </el-form-item>\n          <el-form-item :label=\"$t('code.promoCode')\" prop=\"promoCode\" :class=\"{'noLabel': !codeForm.promoCode, 'onFocus':codeType.promoCode === 1}\">\n            <el-input name=\"text\" :type=\"pwdType\" @keyup.enter.native=\"handleLogin\" v-model=\"codeForm.promoCode\"\n                      :placeholder=\"$t('code.promoCode')\" @focus=\"codeType.promoCode = 1\" @blur=\"codeType.promoCode = 0\"></el-input>\n          </el-form-item>\n          <div class=\"desc\">{{$t('code.promoCodeDesc')}}</div>\n          <el-form-item>\n            <el-button type=\"primary\" style=\"width:100%;\" :loading=\"loading\" @click.native.prevent=\"handleFinish\"\n                       :disabled=\"!isCode\">\n              {{$t('code.buttonText')}}\n            </el-button>\n          </el-form-item>\n        </el-form>\n        <dl>\n          <dt></dt>\n          <dd>\n            {{$t('code.haveAccounts')}}<el-button type=\"text\" @click=\"goLogin\">{{$t('code.goLogin')}}</el-button>\n          </dd>\n        </dl>\n      </div>\n      <copy-right></copy-right>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { isvalidUsername, isvalidUserpassword } from 'common/js/validate'\nimport Advert from 'base/advert'\nimport Language from 'base/language'\nimport copyRight from 'base/copyright'\nimport { setToken } from 'common/js/auth'\n\nconst TIME_COUNT = 59\n\nexport default {\n  name: 'code',\n  data () {\n    const validateCode = (rule, value, callback) => {\n      if(value.length !== 4) {\n        this._data.isCode = false\n        callback(new Error(' '))\n      } else {\n        this._data.isCode = true\n        callback()\n      }\n    }\n    return {\n      codeForm: {\n        verificationCode: '',\n        promoCode: ''\n      },\n      // 0：无 1：输入中 2：出错：3：完成\n      codeType: {\n        verificationCode: '',\n        promoCode: ''\n      },\n      codeRules: {\n        verificationCode: [\n          {required: true, trigger: 'blur', validator: validateCode},\n          {required: true, trigger: 'change', validator: validateCode}\n        ],\n      },\n      loading: false,\n      pwdType: 'password',\n\n      isCode: '',\n      isDisabled: true,\n\n      isFirstSend: true, // 判断是不是没点过发送，因为提示的文字不一样\n      count: '', // 内部显示的数字\n      countShow: false, // 判断显示的是文字提示还是倒计时数字\n      timer: null  // 计时器\n    }\n  },\n  created () {\n  },\n  mounted() {\n    setTimeout(() => {\n      // 加载本页，就发送\n      this.sendCode()\n    }, 20)\n  },\n  methods: {\n    showPwd () {\n      if (this.pwdType === 'password') {\n        this.pwdType = ''\n      } else {\n        this.pwdType = 'password'\n      }\n    },\n    handleFinish () {\n      this.$refs.codeForm.validate(valid => {\n        if (valid) {\n          this.loading = true\n          this.$router.push({path: '/login'})\n          // let userInfo = Object.assign({}, this.loginForm)\n          // 调完成接口\n          // loginByUsername({userInfo}).then((res) => {\n          //   this.loading = false\n          //   this.$store.commit('SET_TOKEN', 'admin')\n          //   // 模拟权限\n          //   setToken('admin')\n          //   this.$router.push({path: '/'})\n          // }).catch(() => {\n          //   this.loading = false\n          // })\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    // 发送验证码\n    sendCode() {\n      if(!this.timer) {\n        this.count = TIME_COUNT\n        this.countShow = true\n        this.isFirstSend = false\n        // ajax调验证码接口位置\n\n        // 定时器60秒\n        this.timer = setInterval(() => {\n          if(this.count > 0 && this.count <= TIME_COUNT) {\n            this.count--\n          } else {\n            this.countShow = false\n            clearInterval(this.timer)\n            this.timer = null\n          }\n        }, 1000)\n      }\n    },\n    // 返回首页\n    goLogin() {\n      this.$router.go('-1')\n    }\n  },\n  destroyed() {\n    clearInterval(this.timer)\n    this.timer = null\n  },\n  components: {\n    Advert,\n    Language,\n    copyRight\n  }\n}\n\n\n</script>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\">\n@import \"common/styles/variable.scss\";\n$bg: #2d3a4b;\n$light_gray: #eee;\n\n/* reset element-ui css */\n.code-container {\n  .code-form {\n    .el-form-item {\n      border: none;\n      margin-bottom: 8px;\n      &:nth-of-type(1) {\n        .el-input {\n          width: 220px;\n        }\n        .el-button {\n          width: 136px;\n          font-size: 14px;\n          margin-left: 6px;\n          padding: 11px 5px;\n        }\n      }\n      &:nth-of-type(2) {\n        margin-bottom: 8px;\n      }\n      &:nth-of-type(3) {\n        margin-bottom: 2px;\n      }\n      &.noLabel label {\n        visibility: hidden;\n      }\n      & label::before {\n        display: none;\n      }\n      .el-form-item__content {\n        clear: both;\n      }\n      .el-input {\n        display: inline-block;\n        height: 36px;\n        input {\n          background: transparent;\n          border: 0px;\n          -webkit-appearance: none;\n          border-radius: 0px;\n          padding: 9px 5px 9px 0;\n          color: $gray_dark;\n          height: 36px;\n          font-size: 18px;\n          border-bottom: 1px solid $gray_line;\n          &::-webkit-input-placeholder {\n            color: $gray_placeholder;\n          }\n        }\n      }\n      .el-input__inner:focus {\n        border-bottom: 1px solid $gray_line_on;\n      }\n      label {\n        color: $gray_placeholder;\n        font-size: 12px;\n        line-height: 12px;\n        padding: 8px 0 0 0;\n      }\n      &.is-error {\n        label {\n          visibility: visible;\n          color: $red;\n        }\n        .el-input__inner {\n          border-bottom: 1px solid $red;\n        }\n        .el-input__inner:focus {\n          border-bottom: 1px solid $gray_line_on;\n        }\n      }\n      &.onFocus {\n        label {\n          visibility: visible;\n          color: $gray_line_on;\n        }\n      }\n      .el-button {\n        padding: 15px 20px;\n        font-size: 18px;\n        background-color: $gray_line_on;\n        border: none;\n        border-radius: 4px;\n      }\n      .el-button--medium {\n        font-size: 18px;\n        color: $white;\n      }\n      .is-disabled {\n        background: $gray_line;\n        color: $gray_light;\n      }\n    }\n  }\n  .code-inner {\n    .el-button--medium {\n      font-size: 12px;\n      color: $blue;\n    }\n  }\n}\n\n</style>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\n@import \"common/styles/variable.scss\";\n.baima-container {\n  position: fixed;\n  height: 100%;\n  width: 100%;\n  display: flex;\n  .code-container {\n    flex: 1;\n    position: relative;\n    .code-inner {\n      position: absolute;\n      left: 50%;\n      right: 0;\n      top: 50%;\n      transform: translate(-50%, -50%);\n      width: 366px;\n      margin: 0 auto;\n      .desc {\n        font-size: 12px;\n        color: $gray_line_on;\n        line-height: 1.4;\n        margin-bottom: 20px;\n      }\n      .show-pwd {\n        position: absolute;\n        right: 0;\n        top: 10px;\n        height: 24px;\n        cursor: pointer;\n        user-select: none;\n      }\n      dl {\n        display: flex;\n        justify-content: space-between;\n        font-size: 12px;\n        dt {\n          flex: 1;\n        }\n        dd {\n          flex: 1;\n          color: $gray_light;\n          text-align: right;\n        }\n      }\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/code/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"baima-container\"},[_c('advert'),_vm._v(\" \"),_c('div',{staticClass:\"code-container\"},[_c('language'),_vm._v(\" \"),_c('div',{staticClass:\"code-inner\"},[_c('el-form',{ref:\"codeForm\",staticClass:\"code-form\",attrs:{\"autoComplete\":\"on\",\"model\":_vm.codeForm,\"rules\":_vm.codeRules,\"label-position\":\"left\"}},[_c('el-form-item',{staticClass:\"verificationCode\",class:{'noLabel': !_vm.codeForm.verificationCode, 'onFocus':_vm.codeType.verificationCode === 1},attrs:{\"label\":_vm.$t('code.VerificationCode'),\"prop\":\"verificationCode\"}},[_c('el-input',{attrs:{\"name\":\"verificationCode\",\"type\":\"text\",\"placeholder\":_vm.$t('code.VerificationCode')},on:{\"focus\":function($event){_vm.codeType.verificationCode = 1},\"blur\":function($event){_vm.codeType.verificationCode = 0}},model:{value:(_vm.codeForm.verificationCode),callback:function ($$v) {_vm.$set(_vm.codeForm, \"verificationCode\", $$v)},expression:\"codeForm.verificationCode\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.sendCode}},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.countShow),expression:\"!countShow\"}]},[(_vm.isFirstSend)?[_vm._v(_vm._s(_vm.$t('code.sendCode')))]:[_vm._v(_vm._s(_vm.$t('code.sendCodeRe')))]],2),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.countShow),expression:\"countShow\"}]},[_vm._v(_vm._s(_vm.count)+\" 秒\")])])],1),_vm._v(\" \"),_c('el-form-item',{class:{'noLabel': !_vm.codeForm.promoCode, 'onFocus':_vm.codeType.promoCode === 1},attrs:{\"label\":_vm.$t('code.promoCode'),\"prop\":\"promoCode\"}},[_c('el-input',{attrs:{\"name\":\"text\",\"type\":_vm.pwdType,\"placeholder\":_vm.$t('code.promoCode')},on:{\"focus\":function($event){_vm.codeType.promoCode = 1},\"blur\":function($event){_vm.codeType.promoCode = 0}},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleLogin($event)}},model:{value:(_vm.codeForm.promoCode),callback:function ($$v) {_vm.$set(_vm.codeForm, \"promoCode\", $$v)},expression:\"codeForm.promoCode\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"desc\"},[_vm._v(_vm._s(_vm.$t('code.promoCodeDesc')))]),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"primary\",\"loading\":_vm.loading,\"disabled\":!_vm.isCode},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.handleFinish($event)}}},[_vm._v(\"\\n            \"+_vm._s(_vm.$t('code.buttonText'))+\"\\n          \")])],1)],1),_vm._v(\" \"),_c('dl',[_c('dt'),_vm._v(\" \"),_c('dd',[_vm._v(\"\\n          \"+_vm._s(_vm.$t('code.haveAccounts'))),_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":_vm.goLogin}},[_vm._v(_vm._s(_vm.$t('code.goLogin')))])],1)])],1),_vm._v(\" \"),_c('copy-right')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-34768316\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/code/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-34768316\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-34768316\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-34768316\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-34768316\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/code/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}